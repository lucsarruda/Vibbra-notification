"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[229],{9229:($,Z,i)=>{i.r(Z),i.d(Z,{default:()=>W});var f=i(2480),t=i(2223);let J=(()=>{class a{constructor(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-apps"]],standalone:!0,features:[t._Bn([]),t.jDz],decls:1,vars:0,template:function(e,s){1&e&&t._UZ(0,"router-outlet")},dependencies:[f.lC],encapsulation:2,changeDetection:0}),a})();var T=i(3144),v=i(6702),p=i(9401),k=i(1217),l=i(3627),u=i(2611),h=i(9609),c=i(9114),y=i(7406),_=i(430),d=i(1728),x=i(2342),g=i(4755),U=i(7579),F=i(1292),A=i(5580),C=i(4867),N=i(2860);function S(a,o){1&a&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Token"),t.qZA(),t._UZ(3,"input",6),t.qZA()),2&a&&(t.xp6(3),t.Q6J("formControlName","app_token"))}let w=(()=>{class a{constructor(e,s,n,r,m,b){this.matDialogRef=e,this._formBuilder=s,this.data=n,this._activatedRoute=r,this._appsService=m,this._snackBar=b}ngOnInit(){this.isnew=this.data.isNew,this.isnew&&(this.title="Novo Aplicativo"),this.isnew||(this.title="Editar Aplicativo"),this.Form=this._formBuilder.group({app_name:["",[p.kI.required]],app_token:[{value:"",disabled:!0},[]],app_active:[!0,[p.kI.required]],app_active_webpush:[!0,[p.kI.required]],app_active_email:[!0,[p.kI.required]],app_active_sms:[!0,[p.kI.required]]}),this.isnew||this._appsService.getIdApp(this.data.user.id,this.data.idApp).subscribe({next:e=>{this.Form.get("app_name").setValue(e.app_name),this.Form.get("app_token").setValue(e.app_token),this.Form.get("app_active").setValue(e.app_active),this.Form.get("app_active_webpush").setValue(e.app_active_channels.webpush),this.Form.get("app_active_email").setValue(e.app_active_channels.email),this.Form.get("app_active_sms").setValue(e.app_active_channels.sms)}})}discard(){this.matDialogRef.close()}salve(){if(this.isnew){const e={app_name:this.Form.get("app_name").value,app_active:this.Form.get("app_active").value,app_active_channels:{webpush:this.Form.get("app_active_webpush").value,email:this.Form.get("app_active_email").value,sms:this.Form.get("app_active_sms").value}};this._appsService.post(this.data.user.id,e).subscribe({next:s=>{this._snackBar.open("Sucesso! Aplicativo criado.","Fechar",{duration:3e3,panelClass:["success"]}),this.matDialogRef.close()}})}else{const e={app_name:this.Form.get("app_name").value,app_active:this.Form.get("app_active").value,app_active_channels:{webpush:this.Form.get("app_active_webpush").value,email:this.Form.get("app_active_email").value,sms:this.Form.get("app_active_sms").value}};this._appsService.put(this.data.user.id,this.data.idApp,e).subscribe({next:s=>{this._snackBar.open("Sucesso! Aplicativo alterado.","Fechar",{duration:3e3,panelClass:["success"]}),this.matDialogRef.close()}})}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.so),t.Y36(p.QS),t.Y36(A.WI),t.Y36(f.gz),t.Y36(N.b),t.Y36(x.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-apps-form"]],standalone:!0,features:[t.jDz],decls:39,vars:19,consts:[[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","sm:p-8","overflow-y-auto",3,"formGroup"],["matInput","",3,"formControlName"],[4,"ngIf"],[1,"flex","flex-col","gt-sm:flex-row","pb-6"],[1,"flex","flex-col","mt-8","gt-sm:mt-0","gt-sm:ml-16"],[1,"font-semibold","mb-2"],[1,"flex","flex-col",3,"color","value","formControlName"],[1,"mb-2",3,"value"],[1,"flex","flex-col","gt-sm:flex-row","pb-4"],[1,"flex","flex-col"],[1,"mb-2",3,"formControlName","color"],[3,"checked","formControlName","color"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","mt-4","sm:mt-6"],[1,"-ml-2"],[1,"flex","items-center","mt-4","sm:order-last"],["mat-stroked-button","",1,"sm:mx-3",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"color","click"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return s.discard()}),t._UZ(5,"mat-icon",4),t.qZA()(),t.TgZ(6,"form",5)(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Nome Aplicativo"),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.YNc(11,S,4,1,"mat-form-field",7),t.TgZ(12,"div",8)(13,"div",9)(14,"span",10),t._uU(15,"Status Aplicativo"),t.qZA(),t.TgZ(16,"mat-radio-group",11)(17,"mat-radio-button",12),t._uU(18," Ativo "),t.qZA(),t.TgZ(19,"mat-radio-button",12),t._uU(20," Desativo "),t.qZA()()()(),t.TgZ(21,"div",13)(22,"div",14)(23,"span",10),t._uU(24,"Canais Ativos"),t.qZA(),t.TgZ(25,"div",14)(26,"mat-checkbox",15),t._uU(27," Webpush "),t.qZA(),t.TgZ(28,"mat-checkbox",15),t._uU(29," E-mail "),t.qZA(),t.TgZ(30,"mat-checkbox",16),t._uU(31," SMS "),t.qZA()()()(),t.TgZ(32,"div",17),t._UZ(33,"div",18),t.TgZ(34,"div",19)(35,"button",20),t.NdJ("click",function(){return s.discard()}),t._uU(36," Cancelar "),t.qZA(),t.TgZ(37,"button",21),t.NdJ("click",function(){return s.salve()}),t._uU(38," Salvar "),t.qZA()()()()()),2&e&&(t.xp6(3),t.Oqu(s.title),t.xp6(1),t.Q6J("tabIndex",-1),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x-mark"),t.xp6(1),t.Q6J("formGroup",s.Form),t.xp6(4),t.Q6J("formControlName","app_name"),t.xp6(1),t.Q6J("ngIf",!s.isnew),t.xp6(5),t.Q6J("color","primary")("value","just-good")("formControlName","app_active"),t.xp6(1),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(7),t.Q6J("formControlName","app_active_webpush")("color","primary"),t.xp6(2),t.Q6J("formControlName","app_active_email")("color","primary"),t.xp6(2),t.Q6J("checked",!0)("formControlName","app_active_sms")("color","primary"),t.xp6(7),t.Q6J("color","primary"))},dependencies:[_.Ps,_.Hw,p.u5,p._Y,p.Fj,p.JJ,p.JL,T.JF,k.XK,p.UX,p.sg,p.u,v.TU,l.p0,u.JX,h.c,h.Nt,c.KE,c.hX,c.lN,y.Tx,d.ot,d.lW,d.RK,x.ZX,g.ez,g.O5,F.p9,F.oG,C.Fk,C.VQ,C.U0],encapsulation:2,changeDetection:0}),a})();var Q=i(8386),I=i(1683);function Y(a,o){1&a&&(t.TgZ(0,"div",14),t._UZ(1,"mat-progress-bar",15),t.qZA()),2&a&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function R(a,o){1&a&&(t.TgZ(0,"th",32),t._uU(1," Nome "),t.qZA())}function L(a,o){if(1&a&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.app_name,"")}}function j(a,o){1&a&&(t.TgZ(0,"th",32),t._uU(1," Token "),t.qZA())}function q(a,o){if(1&a&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.app_token," ")}}function z(a,o){1&a&&(t.TgZ(0,"th",32),t._uU(1," Status "),t.qZA())}function O(a,o){if(1&a&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.app_active?"Ativado":"Desativado"," ")}}function B(a,o){1&a&&t._UZ(0,"th",36)}function E(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",37)(1,"button",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.editSelected(r.app_id))}),t._UZ(2,"mat-icon",39),t.qZA(),t.TgZ(3,"button",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.deleteSelected(r.app_id))}),t._UZ(4,"mat-icon",39),t.qZA()()}2&a&&(t.xp6(2),t.Q6J("svgIcon","mat_solid:edit"),t.xp6(2),t.Q6J("svgIcon","mat_solid:delete"))}function X(a,o){1&a&&t._UZ(0,"tr",40)}function H(a,o){1&a&&t._UZ(0,"tr",41)}const G=function(){return[10,20,50,100]};function K(a,o){if(1&a&&(t.TgZ(0,"div",16)(1,"div",17)(2,"table",18),t.ynx(3,19),t.YNc(4,R,2,0,"th",20),t.YNc(5,L,2,1,"td",21),t.BQk(),t.ynx(6,22),t.YNc(7,j,2,0,"th",20),t.YNc(8,q,2,1,"td",23),t.BQk(),t.ynx(9,24),t.YNc(10,z,2,0,"th",20),t.YNc(11,O,2,1,"td",25),t.BQk(),t.ynx(12,26),t.YNc(13,B,1,0,"th",27),t.YNc(14,E,5,2,"td",28),t.BQk(),t.YNc(15,X,1,0,"tr",29),t.YNc(16,H,1,0,"tr",30),t.qZA()(),t._UZ(17,"mat-paginator",31),t.qZA()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,G))}}function M(a,o){1&a&&(t.TgZ(0,"div",42),t._uU(1,"Ainda n\xe3o h\xe1 aplicativos cadastraos. Cadastre um aplicativo."),t.qZA())}let V=(()=>{class a{constructor(e,s,n,r,m,b,P){this._changeDetectorRef=e,this._activatedRoute=s,this._appsService=n,this._userService=r,this._router=m,this._fuseConfirmationService=b,this._matDialog=P,this.displayedColumns=["app_name","app_token","app_active","actions"],this.dataSource=new l.by([]),this.searchInputControl=new p.p4,this._unsubscribeAll=new U.x,this.dataCount=0}ngOnInit(){this.user=this._activatedRoute.snapshot.data.user,this._appsService.get(this.user.id).subscribe({next:e=>{this.dataCount=e.length,this.dataSource=new l.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this._changeDetectorRef.markForCheck()}})}applyFilter(e){this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}addApp(){this._matDialog.open(w,{data:{isNew:!0,user:this.user}}).afterClosed().subscribe(s=>{this.ngOnInit()})}editSelected(e){this._matDialog.open(w,{data:{isNew:!1,user:this.user,idApp:e}}).afterClosed().subscribe(n=>{this.ngOnInit()})}deleteSelected(e){this._fuseConfirmationService.open({title:"Excluir Aplicativo",message:"Deseja excluir aplicativo?",actions:{confirm:{label:"Excluir"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._appsService.delete(this.user.id,e).subscribe({next:r=>{this.ngOnInit(),this._changeDetectorRef.markForCheck()}})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.sBO),t.Y36(f.gz),t.Y36(N.b),t.Y36(Q.K),t.Y36(f.F0),t.Y36(I.R),t.Y36(A.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-apps-list"]],viewQuery:function(e,s){if(1&e&&(t.Gf(v.NW,5),t.Gf(u.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(s.paginator=n.first),t.iGM(n=t.CRH())&&(s.sort=n.first)}},standalone:!0,features:[t._Bn([]),t.jDz],decls:17,vars:9,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder","keyup"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],["class","flex flex-col flex-auto sm:mb-13 overflow-hidden sm:overflow-y-auto",4,"ngIf","ngIfElse"],["noData",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"flex","flex-col","flex-auto","sm:mb-13","overflow-hidden","sm:overflow-y-auto"],[1,"p-10"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","app_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","m-card-title","test","","data-label","Riskplan",4,"matCellDef"],["matColumnDef","app_token"],["mat-cell","","class","m-card-sub-title","data-label","Form type",4,"matCellDef"],["matColumnDef","app_active"],["mat-cell","","class","has_label_on_mobile","data-label","Last modified on",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell","","test","","data-label","Riskplan",1,"m-card-title"],["mat-cell","","data-label","Form type",1,"m-card-sub-title"],["mat-cell","","data-label","Last modified on",1,"has_label_on_mobile"],["mat-header-cell",""],["mat-cell",""],["mat-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-header-row",""],["mat-row",""],[1,"p-8","sm:p-16","border-t","text-2xl","font-semibold","tracking-tight","text-center"]],template:function(e,s){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Y,2,1,"div",2),t.TgZ(3,"div",3),t._uU(4,"Aplicativos"),t.qZA(),t.TgZ(5,"div",4)(6,"mat-form-field",5),t._UZ(7,"mat-icon",6),t.TgZ(8,"input",7),t.NdJ("keyup",function(r){return s.applyFilter(r.target.value)}),t.qZA()(),t.TgZ(9,"button",8),t.NdJ("click",function(){return s.addApp()}),t._UZ(10,"mat-icon",9),t.TgZ(11,"span",10),t._uU(12,"Adicionar Aplicativo"),t.qZA()()()(),t.TgZ(13,"div",11),t.YNc(14,K,18,6,"div",12),t.YNc(15,M,2,0,"ng-template",null,13,t.W1O),t.qZA()()),2&e){const n=t.MAs(16);t.xp6(2),t.Q6J("ngIf",!0),t.xp6(4),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:magnifying-glass"),t.xp6(1),t.Q6J("autocomplete","off")("placeholder","Procurar"),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(4),t.Q6J("ngIf",s.dataCount>0)("ngIfElse",n)}},dependencies:[_.Ps,_.Hw,p.u5,T.JF,k.XK,p.UX,v.TU,v.NW,l.p0,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,u.JX,u.YE,u.nU,h.c,h.Nt,c.KE,c.qo,c.lN,y.Tx,d.ot,d.lW,x.ZX,g.ez,g.O5],encapsulation:2,changeDetection:0}),a})();var D=i(482);const W=[{path:"",component:J,resolve:{user:D.O,initialData:D.D},children:[{path:"",component:V}]}]}}]);